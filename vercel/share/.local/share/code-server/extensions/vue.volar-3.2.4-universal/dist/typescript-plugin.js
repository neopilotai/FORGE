const e=require(`./path-browserify-BzDMqxMq.js`),t=require(`./language-core-EVd6iRTL.js`);var n=e.n((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.makeGetExternalFiles=e.decoratedLanguageServiceHosts=e.decoratedLanguageServices=e.projectExternalFileExtensions=e.externalFiles=void 0,e.makeGetScriptInfoWithLargeFileFailsafe=a,e.createLanguageCommon=o,e.isHasAlreadyDecoratedLanguageService=c;let n=t.E(),r=t.j(),i=t.O();e.externalFiles=new WeakMap,e.projectExternalFileExtensions=new WeakMap,e.decoratedLanguageServices=new WeakSet,e.decoratedLanguageServiceHosts=new WeakSet;function a(e){return t=>{try{return e.project.getScriptInfo(t)}catch{}}}function o(e,t,o,s){let c=o.languageServiceHost.getScriptSnapshot.bind(o.languageServiceHost),l=a(o),u=(0,n.createLanguage)([...e.languagePlugins,{getLanguageId:r.resolveFileLanguageId}],new n.FileMap(t.sys.useCaseSensitiveFileNames),(e,t,n)=>{let r;n?r=c(e):(r=l(e)?.getSnapshot(),r||=(o.project.getScriptVersion(e),l(e)?.getSnapshot())),r?u.scripts.set(e,r):u.scripts.delete(e)},e=>{o.session.change({file:e,line:1,offset:1,endLine:1,endOffset:1,insertString:``})});s(u),(0,i.decorateLanguageServiceHost)(t,u,o.languageServiceHost),e.setup?.(u)}e.makeGetExternalFiles=t=>(n,r=0)=>{if(r>=1||!e.externalFiles.has(n)){let r=e.externalFiles.get(n),a=e.projectExternalFileExtensions.get(n),o=a?.length?(0,i.searchExternalFiles)(t,n,a):[];e.externalFiles.set(n,o),r&&!s(r,o)&&n.refreshDiagnostics()}return e.externalFiles.get(n)};function s(e,t){if(e.length!==t.length)return!1;let n=new Set(e);for(let e of t)if(!n.has(e))return!1;return!0}function c(t){return e.decoratedLanguageServices.has(t.languageService)||e.decoratedLanguageServiceHosts.has(t.languageServiceHost)?!0:(e.decoratedLanguageServices.add(t.languageService),e.decoratedLanguageServiceHosts.add(t.languageServiceHost),!1)}})),r=e.n((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.createLanguageServicePlugin=a;let r=t.w(),i=n();function a(e){return t=>{let{typescript:n}=t;return{create(t){if(!(0,i.isHasAlreadyDecoratedLanguageService)(t)){let a=e(n,t),o=a.languagePlugins.map(e=>e.typescript?.extraFileExtensions.map(e=>`.`+e.extension)??[]).flat();i.projectExternalFileExtensions.set(t.project,o);let{proxy:s,initialize:c}=(0,r.createProxyLanguageService)(t.languageService);t.languageService=s,(0,i.createLanguageCommon)(a,n,t,c)}return t.languageService},getExternalFiles:(0,i.makeGetExternalFiles)(n)}}}})),i=r(),a=t.T(),o=t.k(),s=t._();const c=/\\/g;function l(e,n){let{getQuickInfoAtPosition:r,getSuggestionDiagnostics:i,getCompletionsAtPosition:s,getCodeFixesAtPosition:c,findRenameLocations:l}=e;e.getQuickInfoAtPosition=(e,i,...s)=>{let c=r(e,i,...s);if(!c||c.tags?.length)return c;let l=n();if(!l)return c;let[u,,d]=(0,o.getServiceScript)(l,e);if(!u||!(d?.generated?.root instanceof t.r))return c;let f=t.i.get(d.generated.root.sfc),p=d.snapshot.getLength();for(let t of(0,a.toSourceRanges)(d,l,u,c.textSpan.start,c.textSpan.start+c.textSpan.length,!0,()=>!0)){let n=(0,a.toGeneratedRange)(l,u,d,t[1],t[2],e=>!!e.__importCompletion);if(n!==void 0){let t=u.code.snapshot.getText(n[0]-p,n[1]-p);f?.getSetupExposed().has(t)&&(c.tags=r(e,n[0],...s)?.tags)}}return c},e.getSuggestionDiagnostics=(e,...r)=>{let s=i(e,...r),c=n();if(!c)return s;let[l,,u]=(0,o.getServiceScript)(c,e);if(!l||!(u?.generated?.root instanceof t.r))return s;let d=t.i.get(u.generated.root.sfc),f=u.snapshot.getLength();for(let e of s)for(let t of(0,a.toSourceRanges)(u,c,l,e.start,e.start+e.length,!0,e=>!!e.__importCompletion)){let n=(0,a.toGeneratedRange)(c,l,u,t[1],t[2],e=>!e.__importCompletion);if(n!==void 0){let t=l.code.snapshot.getText(n[0]-f,n[1]-f);if(d?.getSetupExposed().has(t)){e.start=n[0],e.length=n[1]-n[0];break}}}return s},e.getCompletionsAtPosition=(e,r,...i)=>{let c=s(e,r,...i);if(!c)return c;let l=n();if(!l)return c;let[u,d,f]=(0,o.getServiceScript)(l,e);if(!u||!(f?.generated?.root instanceof t.r))return c;for(let t of(0,a.toSourceOffsets)(f,l,u,r,()=>!0)){let n=(0,a.toGeneratedOffset)(l,u,f,t[1],e=>!!e.__importCompletion);if(n!==void 0){let t=s(e,n,...i);if(t){let e=new Map(c.entries.map((e,t)=>[e.name,t]));for(let n of t.entries)if(n.kind!==`warning`)if(e.has(n.name)){let t=e.get(n.name);c.entries[t].kind===`warning`&&(c.entries[t]=n)}else c.entries.push(n)}}}return c},e.getCodeFixesAtPosition=(e,r,i,s,...l)=>{let u=c(e,r,i,s,...l);if(!s.includes(2339))return u;let d=n();if(!d)return u;let[f,p,m]=(0,o.getServiceScript)(d,e);if(!f||!(m?.generated?.root instanceof t.r))return u;for(let t of(0,a.toSourceRanges)(m,d,f,r,i,!0,()=>!0)){let n=(0,a.toGeneratedRange)(d,f,m,t[1],t[2],e=>!!e.__importCompletion);if(n!==void 0){let t=c(e,n[0],n[1],[2304],...l);t=t.filter(e=>e.fixName===`import`),u=u.concat(t)}}return u},e.findRenameLocations=(e,r,...i)=>{let a=l(e,r,...i);if(!a?.length)return a;let s=n();if(!s)return a;let[c,d,f]=(0,o.getServiceScript)(s,e);if(!c||!(f?.generated?.root instanceof t.r))return a;let p=s.maps.get(c.code,f),m=f.snapshot.getLength(),h=e=>!!e.__shorthandExpression;if([...p.toSourceLocation(r-m,h)].length===0)for(let[e]of p.toSourceLocation(r-m,()=>!0))for(let t of p.toGeneratedLocation(e,h))return;if(!(typeof i[2]==`boolean`?i[2]:i[2]?.providePrefixAndSuffixTextForRename??!0))return a;let g=[...a];outer:for(let e=0;e<g.length;e++){let{textSpan:t}=g[e],n=t.start-m,r=t.start+t.length-m;for(let[t,i,{data:a}]of p.toSourceRange(n,r,!0,h)){g.splice(e,1,{...g[e],...u(a.__shorthandExpression,`right`,f.snapshot.getText(t,i))});continue outer}for(let[t,i]of p.toSourceRange(n,r,!0,()=>!0))for(let[,,{data:n}]of p.toGeneratedRange(t,i,!0,h)){g.splice(e,1,{...g[e],...u(n.__shorthandExpression,`left`,f.snapshot.getText(t,i))});continue outer}}return g}}function u(e,t,n){return e===`html`?t===`left`?{suffixText:`="${(0,s.camelize)(n)}"`}:{prefixText:`${n}="`,suffixText:`"`}:t===`left`?{suffixText:`: ${n}`}:{prefixText:`${n}: `}}function d(e,n,r,i,a){let o=new Map,s=(e,t)=>{switch(t){case`findReferences`:return l(e[t]);case`getCompletionsAtPosition`:return u(e[t]);case`getCompletionEntryDetails`:return d(e[t]);case`getCodeFixesAtPosition`:return m(e[t]);case`getDefinitionAndBoundSpan`:return h(e[t])}};return new Proxy(r,{get(e,t,n){return o.has(t)||o.set(t,s(e,t)),o.get(t)||Reflect.get(e,t,n)},set(e,t,n,r){return Reflect.set(e,t,n,r)}});function l(e){return(r,...i)=>{let o=e(r,...i);if(!o)return o;for(let{references:e}of o)for(let r of e){let e=n.scripts.get(a(r.fileName)),i=e?.generated?.root;if(!e||!(i instanceof t.r))continue;let s=i.sfc.styles;if(!s.length)return o;s.some(e=>r.textSpan.start>=e.startTagEnd&&r.textSpan.start+r.textSpan.length<=e.endTagStart)&&e.snapshot.getText(r.textSpan.start-1,r.textSpan.start)===`.`&&(r.textSpan.start--,r.textSpan.length++)}return o}}function u(t){return(r,o,...s)=>{let l=r.replace(c,`/`),u=t(l,o,...s);return u&&f(e,n,a,i,l,o,u),u}}function d(e){return(...t)=>{let r=e(...t);return r&&p(n,r,t[6]),r}}function m(e){return(...t)=>{let n=e(...t);return n=n.filter(e=>!e.description.includes(`__VLS_`)),n}}function h(o){return(s,c,...l)=>{let u=o(s,c,...l),d=r.getProgram(),f=n.scripts.get(a(s))?.generated?.root;if(!(f instanceof t.r))return u;if(!u?.definitions?.length)return;if(!f.sfc.template||c<f.sfc.template.startTagEnd||c>f.sfc.template.endTagStart)return u;let p=new Set(u.definitions),m=[];if(u.definitions.length>=2)for(let e of u.definitions)(f.sfc.content[e.textSpan.start-1]===`@`||f.sfc.content.slice(e.textSpan.start-5,e.textSpan.start)===`v-on:`)&&p.delete(e);for(let e of u.definitions){if(i.extensions.some(t=>e.fileName.endsWith(t)))continue;let t=d.getSourceFile(e.fileName);t&&h(t,e,t)}for(let e of m)p.delete(e);return{definitions:[...p],textSpan:u.textSpan};function h(t,n,r){e.isPropertySignature(t)&&t.type||e.isVariableDeclaration(t)&&e.isIdentifier(t.name)&&t.type&&!t.initializer?g(t.name,t.type,n,r):e.forEachChild(t,e=>h(e,n,r))}function g(t,n,r,i){let{textSpan:a,fileName:s}=r,c=t.getStart(i),u=t.getEnd();if(!(c!==a.start||u-c!==a.length)){if(e.isIndexedAccessTypeNode(n)){let e=o(s,n.indexType.getStart(i),...l);if(e?.definitions?.length){for(let t of e.definitions)p.add(t);m.push(r)}}else if(e.isImportTypeNode(n)){let e=o(s,n.argument.getStart(i),...l);if(e?.definitions?.length){for(let t of e.definitions)p.add(t);m.push(r)}}}}}}}function f(e,n,r,i,a,o,c){c.entries=c.entries.filter(e=>!e.name.includes(`__VLS_`)&&!e.labelDetails?.description?.includes(`__VLS_`));let l=n.scripts.get(r(a))?.generated?.root;if(l instanceof t.r&&[l.sfc.template,...l.sfc.styles].filter(Boolean).map(e=>[e.startTagEnd,e.endTagStart]).some(([e,t])=>o>=e&&o<=t)){let t=new Set([`var`,`function`,`module`]),n=e.Completions.SortText.GlobalsOrKeywords,r=new Set([n,`z`+n,n+`1`]);c.entries=c.entries.filter(e=>!(e.kind===`const`&&e.name in i.macros)&&(!t.has(e.kind)||!r.has(e.sortText)||(0,s.isGloballyAllowed)(e.name)))}for(let e of c.entries)if(e.source){let t=e.data,n=e.name;for(let r of i.extensions){let i=(0,s.capitalize)(r.slice(1));if(e.source.endsWith(r)&&e.name.endsWith(i)){e.name=(0,s.capitalize)(e.name.slice(0,-i.length)),e.insertText&&=e.insertText.replace(`${i}$1`,`$1`),t&&(t.__vue__componentAutoImport={oldName:n,newName:e.name});break}}t&&(t.__vue__autoImport={fileName:a})}}function p(e,n,r){if(r?.__vue__componentAutoImport){let{oldName:e,newName:t}=r.__vue__componentAutoImport;for(let r of n?.codeActions??[])for(let n of r.changes)for(let r of n.textChanges)r.newText=r.newText.replace(`import `+e+` from `,`import `+t+` from `)}if(r?.__vue__autoImportSuggestions)for(let e of n?.codeActions??[])for(let t of e.changes)for(let e of t.textChanges){if(r.__vue__componentAutoImport){let{oldName:t,newName:n}=r.__vue__componentAutoImport;e.newText=e.newText.replace(`import type `+t+` from `,`import `+n+` from `)}let{entryName:t}=r.__vue__autoImportSuggestions;e.newText=e.newText.replace(`import type { `+t+` } from `,`import { `+t+` } from `)}if(r?.__vue__autoImport){let{fileName:i}=r.__vue__autoImport,a=e.scripts.get(i);if(a?.generated?.root instanceof t.r){let{vueSfc:e}=a.generated.root;if(!e?.descriptor.script&&!e?.descriptor.scriptSetup)for(let e of n?.codeActions??[]){for(let t of e.changes){for(let e of t.textChanges){e.newText=`<script setup lang="ts">${e.newText}<\/script>\n\n`;break}break}break}}}}function m(e,n,r,i,a,o,s=0){let c=new Map,l=r.getSourceFile(a.fileName),u=r.getTypeChecker(),d=i.generated.languagePlugin.typescript?.getServiceScript(a),f=d?[...n.maps.forEach(d.code)].map(([,e])=>e):[],{sfc:p}=a;return l.forEachChild(function n(r){if(e.isPropertyAccessExpression(r)&&e.isIdentifier(r.expression)&&r.expression.text===t.b&&e.isIdentifier(r.name)){let{name:n}=r;for(let i of f){let a=!1;for(let l of i.toSourceLocation(n.getEnd()-s))if(l[0]>=p.template.startTagEnd+o[0]&&l[0]<=p.template.startTagEnd+o[1]&&(0,t.t.isSemanticTokensEnabled)(l[1].data)){if(a=!0,!c.has(n.text)){let t=u.getTypeAtLocation(r),i=u.typeToString(t,r,e.TypeFormatFlags.NoTruncation);c.set(n.text,{name:n.text,type:i.includes(`__VLS_`)?`any`:i,model:!1})}(e.isPostfixUnaryExpression(r.parent)||e.isBinaryExpression(r.parent))&&(c.get(n.text).model=!0);break}if(a)break}}r.forEachChild(n)}),[...c.values()]}var h=e.s(e.t());function g(e,n,r,{fileName:i,sfc:a},o){let c=new Set([o,(0,s.camelize)(o),(0,s.capitalize)((0,s.camelize)(o))]),l=t.i.get(a);for(let t of l?.getImportedComponents()??[])if(c.has(t)){let i=b(e,r,t);if(i)return{node:i,type:n.getTypeAtLocation(i)}}let u=v(e,n,r,t.y);if(u){let a=o.split(`.`),c=u.type.getProperty(a[0])??u.type.getProperty((0,s.camelize)(a[0]))??u.type.getProperty((0,s.capitalize)((0,s.camelize)(a[0])));if(c){let e=n.getTypeOfSymbolAtLocation(c,u.node);for(let t=1;t<a.length;t++)c=e.getProperty(a[t]),c&&(e=n.getTypeOfSymbolAtLocation(c,u.node));if(e)return{node:u.node,type:e}}else if(_(i)===(0,s.capitalize)((0,s.camelize)(o)))return v(e,n,r,t.v)}let d=_(i);if(c.has(d))return v(e,n,r,t.v)}function _(e){let t=h.basename(e);return(0,s.capitalize)((0,s.camelize)(t.slice(0,t.lastIndexOf(`.`))))}function v(e,t,n,r){let i=y(e,n,r);if(i)return{node:i,type:t.getTypeAtLocation(i)}}function y(e,t,n){let r;return i(t),r;function i(t){r||(e.isVariableDeclaration(t)&&t.name.getText()===n?r=t:t.forEachChild(i))}}function b(e,t,n){let r;return i(t),r;function i(t){r||(e.isImportDeclaration(t)&&t.importClause?.name?.text===n?r=t.importClause.name:t.forEachChild(i))}}function x(e,n,r){let i=n.getSourceFile(r);if(!i)return[];let a=v(e,n.getTypeChecker(),i,t.x);return a?a.type.getProperties().map(({name:e})=>e).filter(e=>e.match(/^v[A-Z]/)):[]}function S(e){let t=e.getConstructSignatures(),n=e.getCallSignatures();for(let e of t)return 1;for(let e of n)return 2}function C(e,t){let n=t.getConstructSignatures(),r=t.getCallSignatures();for(let t of n){let n=D(e,t.getReturnType(),`$props`);if(n)return n}for(let t of r)if(t.parameters.length>0){let n=t.parameters[0];if(n)return e.getTypeOfSymbol(n)}}function w(e,t){let n=t.getConstructSignatures(),r=t.getCallSignatures();for(let t of n){let n=D(e,t.getReturnType(),`$slots`);if(n)return n}for(let t of r)if(t.parameters.length>1){let n=t.parameters[1];if(n){let t=D(e,e.getTypeOfSymbol(n),`slots`);if(t)return t}}}function T(e,t){let n=t.getConstructSignatures(),r=t.getCallSignatures();for(let t of n){let n=D(e,t.getReturnType(),`$emit`);if(n)return n}for(let t of r)if(t.parameters.length>1){let n=t.parameters[1];if(n){let t=D(e,e.getTypeOfSymbol(n),`emit`);if(t)return t}}}function E(e,t){let n=t.getConstructSignatures(),r=t.getCallSignatures();for(let e of n)return e.getReturnType();for(let t of r)if(t.parameters.length>2){let n=t.parameters[2];if(n){let t=e.getTypeOfSymbol(n).getCallSignatures();for(let n of t){let t=n.getParameters();if(t.length>0)return e.getTypeOfSymbol(t[0])}}}}function D(e,t,n){let r=t.getProperty(n);if(r)return e.getTypeOfSymbol(r);if(t.isUnionOrIntersection())for(let r of t.types){let t=D(e,r,n);if(t)return t}}function O(e,n,r,i){let a=r.scripts.get(i)?.generated?.root;if(!a)return;let o=a.sfc.scriptSetup?.ast;if(!o)return;let s=t.a(e,o,a.vueCompilerOptions);if(s)return k(e,n,o,s)}function k(e,t,n,r){let i=new Map;if(r.withDefaults?.arg){let a=A(e,r.withDefaults.arg.node);if(a){for(let r of a.properties)if(e.isPropertyAssignment(r)){let a=r.name.getText(n),o=M(e,r.initializer),s=t.printNode(e.EmitHint.Expression,o,n);i.set(a,s)}}}else if(r.defineProps?.destructured){for(let[a,o]of r.defineProps.destructured)if(o){let r=t.printNode(e.EmitHint.Expression,o,n);i.set(a,r)}}if(r.defineModel)for(let a of r.defineModel){let r=a.arg?A(e,a.arg.node):void 0;if(r){let o=a.name?n.text.slice(a.name.start,a.name.end).slice(1,-1):`modelValue`,s=j(e,t,n,r);s&&i.set(o,s)}}return i}function A(e,t){if(e.isObjectLiteralExpression(t))return t;let n;return t.forEachChild(t=>{n||=A(e,t)}),n}function j(e,t,n,r){let i;for(let a of r.properties)if(e.isPropertyAssignment(a)&&a.name.getText(n)===`default`){let r=M(e,a.initializer);i=t.printNode(e.EmitHint.Expression,r,n)??r.getText(n)}return i}function M(e,t){return e.isArrowFunction(t)?e.isBlock(t.body)?t:e.isParenthesizedExpression(t.body)?t.body.expression:t.body:t}const N=new Set([`PublicProps`,`VNodeProps`,`AllowedComponentProps`,`ComponentCustomProps`]);function P(e,t,n,r,i,a){let o=new Set;function s(e){let n=_(e);if(n===`any`||o.has(e)||i===!1)return!0;if(typeof i==`object`){for(let r of i.ignore??[])if(typeof r==`function`){let i=r(n,e,t);if(typeof i==`boolean`)return i}else if(n===r)return!0}return!1}function c(e,t){return e[t.name]=t,e}function l(n){return n.getJsDocTags(t).map(t=>({name:t.name,text:t.text===void 0?void 0:e.displayPartsToString(t.text)}))}function u(r){let i=t.getTypeOfSymbol(r),o,s,c=!1,u,f=!(r.flags&e.SymbolFlags.Optional);for(let t of r.declarations??[])if(d(t)&&(c=!0),e.isPropertyAssignment(t)&&e.isObjectLiteralExpression(t.initializer)){for(let r of t.initializer.properties)if(e.isPropertyAssignment(r)){let i=r.name.getText();if(i===`default`){let i=M(e,r.initializer);u=n.printNode(e.EmitHint.Expression,i,t.getSourceFile())}else i===`required`&&r.initializer.getText()===`true`&&(f=!0)}}return{name:r.getEscapedName().toString(),global:c,default:u,description:e.displayPartsToString(r.getDocumentationComment(t)),tags:l(r),required:f,type:_(i),get schema(){return o??=g(i)},get declarations(){return a.noDeclarations?[]:this.getDeclarations()},get rawType(){if(a.rawType)return this.getTypeObject()},getDeclarations(){return s??=v(r.declarations??[])},getTypeObject(){return i}}}function d(t){let n=t.parent;for(;n;){if(e.isInterfaceDeclaration(n)||e.isTypeAliasDeclaration(n))return!!N.has(n.name.text);n=n.parent}return!1}function f(n){let r=t.getNonNullableType(t.getTypeOfSymbol(n)).getCallSignatures()[0]?.parameters[0],i=r?t.getTypeOfSymbol(r):t.getAnyType(),o,s;return{name:n.getName(),type:_(i),description:e.displayPartsToString(n.getDocumentationComment(t)),tags:l(n),get schema(){return o??=g(i)},get declarations(){return a.noDeclarations?[]:this.getDeclarations()},get rawType(){if(a.rawType)return this.getTypeObject()},getDeclarations(){return s??=v(n.declarations??[])},getTypeObject(){return i}}}function p(n){let r=t.getTypeOfSymbol(n),i,o;return{name:n.getName(),type:_(r),description:e.displayPartsToString(n.getDocumentationComment(t)),tags:l(n),get schema(){return i??=g(r)},get declarations(){return a.noDeclarations?[]:this.getDeclarations()},get rawType(){if(a.rawType)return this.getTypeObject()},getDeclarations(){return o??=v(n.declarations??[])},getTypeObject(){return r}}}function m(n){let r,i,o,s,c=`[]`,u=()=>[];if(n.parameters.length>=2)if(s=n.parameters[1],o=t.getTypeOfSymbol(s),n.parameters[1].valueDeclaration?.dotDotDotToken)c=_(o),u=()=>t.getTypeArguments(o).map(g);else{c=`[`;for(let e=1;e<n.parameters.length;e++)c+=_(t.getTypeOfSymbol(n.parameters[e]))+`, `;c=c.slice(0,-2)+`]`,u=()=>{let e=[];for(let r=1;r<n.parameters.length;r++)e.push(g(t.getTypeOfSymbol(n.parameters[r])));return e}}return{name:t.getTypeOfSymbol(n.parameters[0]).value,description:e.displayPartsToString(n.getDocumentationComment(t)),tags:l(n),type:c,signature:t.signatureToString(n),get schema(){return r??=u()},get declarations(){return a.noDeclarations?[]:this.getDeclarations()},get rawType(){if(a.rawType)return this.getTypeObject()},getDeclarations(){return i??=n.declaration?v([n.declaration]):[]},getTypeObject(){return o}}}function h(e){let n;return{kind:`event`,type:t.signatureToString(e),get schema(){return n??=e.parameters.length?t.getTypeArguments(t.getTypeOfSymbol(e.parameters[0])).map(g):void 0}}}function g(n){let r=_(n);if(s(n))return r;if(o.add(n),n.isUnion()){let e;return{kind:`enum`,type:r,get schema(){return e??=n.types.map(g)}}}else if(t.isArrayLikeType(n)){let e;return{kind:`array`,type:r,get schema(){return e??=t.getTypeArguments(n).map(g)}}}else if(n.getCallSignatures().length===0&&(n.isClassOrInterface()||n.isIntersection()||n.objectFlags&e.ObjectFlags.Anonymous)){let e;return{kind:`object`,type:r,get schema(){return e??=n.getProperties().map(u).reduce(c,{})}}}else if(n.getCallSignatures().length===1)return h(n.getCallSignatures()[0]);return r}function _(n){let r=t.typeToString(n,void 0,e.TypeFormatFlags.UseFullyQualifiedType|e.TypeFormatFlags.NoTruncation);return r.includes(`import(`)?r.replace(/import\(.*?\)\./g,``):r}function v(e){return e.map(y).filter(e=>!!e)}function y(e){let t=e.getSourceFile().fileName,n=r.scripts.get(t);if(n?.generated){let t=n.generated.languagePlugin.typescript?.getServiceScript(n.generated.root);if(t)for(let[n,i]of r.maps.forEach(t.code))for(let[t]of i.toSourceLocation(e.getStart()))for(let[r]of i.toSourceLocation(e.getEnd()))return{file:n.id,range:[t,r]};return}return{file:e.getSourceFile().fileName,range:[e.getStart(),e.getEnd()]}}return{resolveNestedProperties:u,resolveSlotProperties:f,resolveEventSignature:m,resolveExposedProperties:p,resolveSchema:g}}function F(e,n,r,i,a,o,s,c={noDeclarations:!0,rawType:!1}){let l=n.getSymbolAtLocation(a),u=a.getSourceFile();if(l){let t=l.flags&e.SymbolFlags.Alias?n.getAliasedSymbol(l):o.symbol,r=t?.valueDeclaration??t?.declarations?.[0];r&&(u=r.getSourceFile(),a=r)}let d,f,p,m,h,g,_,v={get name(){return d??=A()},get description(){return f??=j()},get type(){return p??=y()},get props(){return m??=b()},get events(){return h??=x()},get slots(){return g??=D()},get exposed(){return _??=k()}};return v;function y(){return S(o)??0}function b(){let t=C(n,o);if(!t)return[];let a=[],l=t.getProperties(),d=new Set(v.events.map(e=>`on${e.name.charAt(0).toUpperCase()}${e.name.slice(1)}`));a=l.map(t=>{let{resolveNestedProperties:a}=P(e,n,r,i,s,c);return a(t)}).filter(e=>!!e&&!d.has(e.name));let f=O(e,r,i,u.fileName);for(let e of a)e.name.match(/^onVnode[A-Z]/)&&(e.name=`onVue:`+e.name[7]?.toLowerCase()+e.name.slice(8)),e.default??=f?.get(e.name);return a}function x(){let t=T(n,o);return t?t.getCallSignatures().map(t=>{let{resolveEventSignature:a}=P(e,n,r,i,s,c);return a(t)}).filter(e=>e.name):[]}function D(){let t=w(n,o);return t?t.getProperties().map(t=>{let{resolveSlotProperties:a}=P(e,n,r,i,s,c);return a(t)}):[]}function k(){let t=E(n,o);if(t){let a=C(n,o)?.getProperties()??[];return t.getProperties().filter(e=>e.declarations?.length&&!e.valueDeclaration&&(!a.length||!a.some(({name:t})=>t===e.name))&&e.name!==`$slots`).map(t=>{let{resolveExposedProperties:a}=P(e,n,r,i,s,c);return a(t)})}return[]}function A(){let n=a;return u.text.slice(n.pos,n.end).includes(t.v)&&e.forEachChild(u,r=>{if(e.isVariableStatement(r))for(let{name:e,initializer:i}of r.declarationList.declarations)e.getText()===t.v&&i&&(n=i)}),t.o(e,n,u)?.name?.node.text}function j(){let t=e.getJSDocCommentsAndTags(a);for(let n of t)if(e.isJSDoc(n)&&n.comment){if(typeof n.comment==`string`)return n.comment;if(Array.isArray(n.comment))return n.comment.map(e=>e.text||``).join(``)}let r=n.getSymbolAtLocation(a);if(r)return e.displayPartsToString(r.getDocumentationComment(n))||void 0}}function I(e,t,n,r,i,a){let o=t.getTypeChecker(),s=g(e,o,r,i,a);if(s)return F(e,o,e.createPrinter(),n,s.node,s.type,!1)}function L(e,n,{fileName:r,sfc:i}){let a=n.getSourceFile(r);if(!a)return[];let o=v(e,n.getTypeChecker(),a,t.y)?.type.getProperties().map(e=>e.name).filter(e=>!e.includes(`$`)&&!e.startsWith(`_`))??[];return o.push(_(r)),o.push(...t.i.get(i)?.getImportedComponents()??[]),[...new Set(o)]}function R(e,n,r){let i=t.i.get(r.sfc);if(!i)return[];let a=n.getSourceFile(r.fileName);if(!a)return[];let o=v(e,n.getTypeChecker(),a,i.getScriptSetupRanges()?.defineSlots?.name??t.C);return o?o.type.getProperties().map(({name:e})=>e):[]}function z(e,n,r,i){let a=n.getSourceFile(r);if(!a)return[];let o=n.getTypeChecker(),s=v(e,o,a,t.S);if(!s)return[];let c=s.type.getProperty(i);return c?o.getTypeOfSymbol(c).getProperties().map(t=>({name:t.name,type:o.typeToString(o.getTypeOfSymbolAtLocation(t,a),s.node,e.TypeFormatFlags.NoTruncation)})):[]}function B(e,n,r){let i=n.getSourceFile(r);if(!i)return[];let a=v(e,n.getTypeChecker(),i,t.S);return a?a.type.getProperties().map(e=>e.name):[]}function V(e,t,n,r,i,a){let o=n.getSourceFile(i),s=n.getSourceFile(r);if(!s||!o)return;let c=e.moduleSpecifiers.getModuleSpecifiersWithCacheInfo,l=e.createModuleSpecifierResolutionHost(n,t),{moduleSpecifiers:u}=c(o.symbol,n.getTypeChecker(),t.getCompilationSettings(),s,l,a);return u[0]}function H(e,n,r,i,a,o,s=0){let c=i.generated.languagePlugin.typescript?.getServiceScript(a);if(!c)return!1;let l=!1;for(let[e,r]of n.maps.forEach(c.code)){for(let[e,n]of r.toGeneratedLocation(o))if((0,t.t.isCompletionEnabled)(n.data)){o=e,l=!0;break}if(l)break}if(!l)return!1;let u=r.getSourceFile(a.fileName);if(!u)return!1;let d=f(u,u,o+s);if(!d)return!1;return r.getTypeChecker().getTypeAtLocation(d).getProperties().some(t=>t.declarations?.some(t=>e.isPropertySignature(t)&&e.isComputedPropertyName(t.name)&&e.isIdentifier(t.name.expression)&&t.name.expression.text===`RefSymbol`));function f(t,n,r){let i;return n.forEachChild(n=>{i||(n.end===r&&e.isIdentifier(n)?i=n:n.end>=r&&n.getStart(t)<r&&(i=f(t,n,r)))}),i}}function U(e,t,n,r){let i=t.getCompilationSettings(),a=r.split(`.`).pop(),o=e.resolveModuleName(r,n,{...i,allowArbitraryExtensions:!0},{fileExists(e){return e=W(e,a),t.fileExists(e)}}).resolvedModule?.resolvedFileName;if(o)return W(o,a)}function W(e,t){return t&&e.endsWith(`.d.${t}.ts`)?e.slice(0,-`.d.${t}.ts`.length)+`.${t}`:e}const G=new WeakMap;module.exports=(0,i.createLanguageServicePlugin)((e,n)=>{G.set(n.project,n.languageService);let r=s(),i=t.n(e,n.languageServiceHost.getCompilationSettings(),r,e=>e);c();let o;return l(n.languageService,()=>o),{languagePlugins:[i],setup:t=>{o=t,n.languageService=d(e,t,n.languageService,r,e=>e),n.project.__vue__={language:t}}};function s(){if(n.project.projectKind===e.server.ProjectKind.Configured){let r=n.project.getProjectName();return t.l(e,e.sys,r.replace(/\\/g,`/`)).vueOptions}else return t.u(e,e.sys,n.languageServiceHost.getCurrentDirectory(),{}).vueOptions}function c(){let i=n.project.projectService;if(i.logger.info(`Vue: called handler processing `+n.project.projectKind),!n.session){i.logger.info(`Vue: there is no session in info.`);return}let o=n.session;if(!o.addProtocolHandler){i.logger.info(`Vue: there is no addProtocolHandler method.`);return}let s=o.handlers;if(s.has(`_vue:projectInfo`))return;o.addProtocolHandler(`_vue:projectInfo`,e=>s.get(`projectInfo`)(e)),o.addProtocolHandler(`_vue:documentHighlights-full`,e=>s.get(`documentHighlights-full`)(e)),o.addProtocolHandler(`_vue:encodedSemanticClassifications-full`,e=>s.get(`encodedSemanticClassifications-full`)(e)),o.addProtocolHandler(`_vue:quickinfo`,e=>s.get(`quickinfo`)(e)),o.addProtocolHandler(`_vue:collectExtractProps`,t=>{let[n,r]=t.arguments,{project:i,language:a,sourceScript:o,virtualCode:s}=l(n);return c(m(e,a,i.getLanguageService().getProgram(),o,s,r,o.generated?o.snapshot.getLength():0))}),o.addProtocolHandler(`_vue:getImportPathForFile`,t=>{let[n,r,i]=t.arguments,{project:a}=u(n);return c(V(e,a,a.getLanguageService().getProgram(),n,r,i))}),o.addProtocolHandler(`_vue:getAutoImportSuggestions`,n=>{let[i,a]=n.arguments,{project:s,language:u,sourceScript:d,virtualCode:p}=l(i),m=G.get(s);if(!m)return c(void 0);for(let n of t.t.forEachEmbeddedCode(p)){if(!n.id.startsWith(`script_`))continue;let t=u.maps.get(n,d);for(let[n,s]of t.toGeneratedLocation(a)){if(!s.data.__importCompletion)continue;let t=n+d.snapshot.getLength(),l=m.getCompletionsAtPosition(i,t,o.getPreferences(i),o.getFormatOptions(i));if(l){f(e,u,e=>e,r,i,a,l),l.entries=l.entries.filter(e=>{let t=e.data;return t?.__vue__componentAutoImport||t?.__vue__autoImport});for(let e of l.entries){let t=e.data;t.__vue__autoImportSuggestions={fileName:i,position:n+d.snapshot.getLength(),entryName:t.__vue__componentAutoImport?.oldName??e.name,source:e.source}}}return c(l)}let s=m.getCompletionsAtPosition(i,0,o.getPreferences(i),o.getFormatOptions(i));if(s){f(e,u,e=>e,r,i,a,s),s.entries=s.entries.filter(e=>{let t=e.data;return t?.__vue__componentAutoImport||t?.__vue__autoImport});for(let e of s.entries){let t=e.data;t.__vue__autoImportSuggestions={fileName:i,position:0,entryName:t.__vue__componentAutoImport?.oldName??e.name,source:e.source}}return c(s)}}return c(void 0)}),o.addProtocolHandler(`_vue:resolveAutoImportCompletionEntry`,e=>{let[n]=e.arguments;if(!n?.__vue__autoImportSuggestions)return c(void 0);let{fileName:r,position:i,entryName:s,source:l}=n.__vue__autoImportSuggestions,{project:d,language:f}=u(r),m=G.get(d);if(!m)return c(void 0);let h=m.getCompletionEntryDetails(r,i,s,o.getFormatOptions(r),l,o.getPreferences(r),n);if(h){for(let e of h.codeActions??[])e.changes=(0,a.transformFileTextChanges)(f,e.changes,!1,t.t.isCompletionEnabled);p(f,h,n)}return c(h)}),o.addProtocolHandler(`_vue:isRefAtPosition`,t=>{let[n,r]=t.arguments,{project:i,language:a,sourceScript:o,virtualCode:s}=l(n);return c(H(e,a,i.getLanguageService().getProgram(),o,s,r,o.generated?o.snapshot.getLength():0))}),o.addProtocolHandler(`_vue:getComponentDirectives`,t=>{let[n]=t.arguments,{project:r}=u(n);return c(x(e,r.getLanguageService().getProgram(),n))}),o.addProtocolHandler(`_vue:getComponentNames`,t=>{let[n]=t.arguments,{project:r,virtualCode:i}=l(n);return c(L(e,r.getLanguageService().getProgram(),i))}),o.addProtocolHandler(`_vue:getComponentMeta`,t=>{let[n,r]=t.arguments,{project:i,virtualCode:a,language:o}=l(n),s=i.getLanguageService().getProgram();return c(I(e,s,o,s.getSourceFile(a.fileName),a,r))}),o.addProtocolHandler(`_vue:getComponentSlots`,t=>{let[n]=t.arguments,{project:r,virtualCode:i}=l(n);return c(R(e,r.getLanguageService().getProgram(),i))}),o.addProtocolHandler(`_vue:getElementAttrs`,t=>{let[n,r]=t.arguments,{project:i}=u(n);return c(z(e,i.getLanguageService().getProgram(),n,r))}),o.addProtocolHandler(`_vue:getElementNames`,t=>{let[n]=t.arguments,{project:r}=u(n);return c(B(e,r.getLanguageService().getProgram(),n))}),o.addProtocolHandler(`_vue:resolveModuleName`,t=>{let[r,i]=t.arguments;return c(U(e,n.languageServiceHost,r,i))}),i.logger.info(`Vue specific commands are successfully added.`);function c(e){return{response:e,responseRequired:!0}}function l(e){let n=u(e),r=n.language.scripts.get(e);if(!r)throw Error(`No source script found for file: `+e);let i=r.generated?.root;if(!(i instanceof t.r))throw Error(`No virtual code found for file: `+e);return{...n,sourceScript:r,virtualCode:i}}function u(e){let{project:t}=o.getFileAndProject({file:e,projectFileName:void 0});if(!(`__vue__`in t))throw Error(`No vue project info for project: `+t.getProjectName());return{project:t,language:t.__vue__.language}}}});